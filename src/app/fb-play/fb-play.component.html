<div class="container">
    <div *ngIf="!isLoggedIn">
        <p>You have to log into facebook so that I can analyze your posts. They will not be saved! </p>
        <button md-button color="primary" (click)="fbLogin()">Click here to login</button>
    </div>
    <p>If you don't want to login through facebook, then you can just paste text into the box below.</p>
    <input md-input placeholder="Put in your own text here:" value="..." [(ngModel)]="customText">
    <p>
        If you want, you can change which classifier you're using. To do this, <a href="https://www.uclassify.com/browse">go to the uClassify Page</a>
        and select your own classifier and the appropriate username for it. For example, if I wanted to use the mood classifier I would put Mood into
        the classifier box and prfekt into the username box.
    </p>
    <input md-input placeholder="Change the Classifier here:" value="Sentiment" [(ngModel)]="classifier">
    <input md-input placeholder="Change the username for the classifier here:" value="uClassify" [(ngModel)]="username">
    <button md-raised-button color="primary" *ngIf="classifier && username" (click)="checkClassifier()">Get info about the Classifier</button>
    <md-grid-list cols="12" rowHeight="25px" *ngIf="classifierInfo && classifierInfo.length > 0">
        <md-grid-tile colspan="6" rowspan="2">Class Name</md-grid-tile>
        <md-grid-tile colspan="3" rowspan="2">Words Trained</md-grid-tile>
        <md-grid-tile colspan="3" rowspan="2">Unique Words</md-grid-tile>
        <md-grid-tile
                *ngFor="let tile of classifierInfo"
                [style.background]="tile.color"
                [colspan] = "tile.colspan"
                [rowspan] = "tile.rowspan"
                [style.color] = "tile.textColor">
            <p>{{tile.text | largeNumber}}</p>
        </md-grid-tile>
    </md-grid-list>


    <div *ngIf="(isLoggedIn || customText) && !loadingClassifications">
        <p *ngIf="isLoggedIn">Now that you're logged in, we can begin analyzing. First, select a style of classification.</p>
        <p *ngIf="customText">Now that you've added your own text, we can begin analyzing. First, select a style of classification.</p>
        <md-radio-group [(ngModel)]="action">
            <md-radio-button value="classify">Overall Sentiment</md-radio-button>
            <md-radio-button value="keywords">Keywords</md-radio-button>
        </md-radio-group>
        <p><span class="accent">Overall Sentiment</span> is going to return how negative or positive your posts are for each post.</p>
        <p><span class="accent">Keywords</span> will return what words make your posts positive or negative.</p>
        <button *ngIf="action && !hasClicked" md-raised-button color="primary" (click)="getClassifications()">Analyze sentiment!</button>
        <p *ngIf="hasClicked">If you want to do a different classification, please reload.</p>
        <button *ngIf="hasClicked" md-raised-button color="primary" onClick="window.location.reload()">Reload the page</button>
    </div>
    <p *ngIf="loadingClassifications">I'm talking to servers... might be a few seconds.</p>
    <div *ngIf="action">
        <p>If the color is pink, this means your message is positive. The pinker, the more certain the positivity. The lighter, the less certain.</p>
        <i *ngFor="let color of pink" [style.color]="color" class="material-icons">indeterminate_check_box</i>
        <p>If the color is pink, this means your message is negative. The darker, the more certain the negativity. The lighter, the less certain.</p>
        <i *ngFor="let color of blueGrey" [style.color]="color" class="material-icons">indeterminate_check_box</i>
    </div>
    <md-grid-list cols="3" rowHeight="50px" *ngIf="displayTiles && displayTiles.length > 0 && action === 'classify'">
        <md-grid-tile>Your Text</md-grid-tile>
        <md-grid-tile>Negative Sentiment</md-grid-tile>
        <md-grid-tile>Positive Sentiment</md-grid-tile>
        <md-grid-tile
                *ngFor="let tile of displayTiles"
                [style.background]="tile.color">
            {{tile.text}}
        </md-grid-tile>
    </md-grid-list>
    <md-grid-list cols="3" rowHeight="3em" *ngIf="displayTiles && displayTiles.length > 0 && action === 'keywords'">
        <md-grid-tile colspan="2" rowspan="2">Your Text</md-grid-tile>
        <md-grid-tile colspan="1" rowspan="2">Keyword Results</md-grid-tile>
        <md-grid-tile
                *ngFor="let tile of displayTiles"
                [style.background]="tile.color"
                [colspan] = "tile.colspan"
                [rowspan] = "tile.rowspan"
                [style.color] = "tile.textColor">
            <p>{{tile.text}}</p>
        </md-grid-tile>
    </md-grid-list>
    <div *ngIf="loading">
        It takes about 10 seconds... fetching that data.... If it takes longer, app is probably broken
    </div>
    <p *ngIf="error">Error: {{error}}</p>
</div>
<!--
<div *ngIf="isLoggedIn && !loading">
    <button  md-raised-button color="primary" (click)="getFeedLikes()">Get your feed likes</button>
    <p *ngIf="totalLikes">Total Likes: {{totalLikes}}</p>
    <div *ngFor="let who of whoLikes; let idx=index;">
        <p>{{idx + 1}}. {{who.name}}:{{who.num}}</p>
    </div>
</div>-->
